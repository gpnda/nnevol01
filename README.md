# nnevol by Khan RL Lab

##  What is this?
This is a simulation of evolution of neural networks in a 2D world. Creatures look by raycast algorithm, controlled by neural networks move around, eat food, reproduce, and evolve over generations. Its all about evolution of behavior, not evolution of morphology. its about emergent complexity from simple rules. Коныечные автоматы ебать как их Finite State Machines (FSM) копайлот подсказал. 

Application is written in Python using Pygame for rendering. It a monolithic application without client-server architecture.

## How to run
1. .venv
2. pip install -r requirements.txt
3. python nnevol.py

## Controls
Space: Start/Pause simulation
A: Toggle animation on/off
L: Toggle logging on/off
F9 Edit simulation parameters

## What next?

1. вывод энергии выбранного существа на экран, ну вцелом довести до ума: номер поколения, количество потомков и т.п.
2. потом делть popup окно со списком существ и детальной информации по выбранному, потом свяжу выбранное существо во viewport со списокм существ, будет безшовно
3. надо разобраться почему у существ бывает отрицательная энергия =BBB
4. вывести агреггированную информацию по популяции на экран: средняя энергия, средний возраст, среднее количество потомков и т.п. - покажет работает ли нормально интерфейс окон/виджетов
5. надо агрешгировать информацию по размеру популяции и изобилию мира, но без оверхеда в быстром запуске (с выключенной анимацией)
6. потом надо стабилизировать приложение и попытаться добиться сходимости к предположительно осмысленному движению к пищи. 
7. Дальше нужно разобраться с окнами для экспериментов - чтобы были модальными, и чтобы ну максимально независимые миры чтоб там можно было стартовать, это ключевая история поэтому надо качественно продумать интерфейс с основным приложением
8. И первый эксперимент - "конус успеха". пища перемещается по матрице, чтобы существо нарисовало конус из успешных достижений пиши. Процент заполненности матрицы успехами - будет метрикой эксперимента.
9. дальше надо снова стабилизировать приложение. Тут как раз плотно понадобится сохранение и загрузка приложения, популяции, части популяции.
10. Мир надо сделать больше, как в предыдущей версии, вообще все параметры надо бы стравнить с прошлой версией.
11. волны изобилия, освещенности 
    - Зима-Лето
    - День-ночь
	- Прилив-Отлив
12. Тестировать, что приложение может работать без постоянного наблюдения и корректировки параметров. По идее с волнами изобилия, процесс эволюции не должен останавливаться, потому что там есть защита от вырождения и перенаселенности. Если приложение будет автономно эволюционировать - неизбежно появится интересное пищевое поведение для начала.


# Потом просто по графику экспериментов двигаться, дорога то прямая:

	# Стадия 0
		Существа научаются кусать. Только когда они кусают, и попадается именно пища в клетке, то существо получает энергию. Отбор идет против тех, кто не кусает совсем.

	# Стадия 1
		Повышаем затраты энергии на процесс кусания, что собственно можно трактовать штрафом за промах при кусании. Отбор поддерживает тех, кто построил связь между красным цветом на входе, - с выходом "укусить". Отбор поддерживает тех кто видит.  

	# Стадия 2
		Это автоматичекая стадия, потому что ничего менять в настройках симуляции не надо. Когда существа обычно крутящиеся по маленькому кругу, съедают пищу которая сама собой попадается на пути, начинается отбор против тупого кружения по маленькому радиусу.

	# Стадия 3
		Если просто ждать, появятся существа, которые движутся относительно прямолинейно в поисках пищи. Здесь эксперимент с конусом - должен быть показателен. Постепенно конус станет более выраженным и большим.

	# Стадия 4
		Добавляем ночь. И ночью сделаем выход хищников. Это NPC, алгоритмически управляемые существа, которые активно гоняются по территории, но не заморачиваются норками. Отбор будет поддерживать существ, которые с настеплением ночи прячутся в норках.

	# Стадия 5
		Добавлением размножение через личинки и добавляем хищников, которые поедают личинки.
		отбор будет идти против существ, которые откладывают яйца где попало на открытом месте. Причем это как будто очень прямолинейная смуляция, без вариантов оставляющая только тех, кто понимает что это норка и тут можно отложить личинки.

	# Стадия 6
		Добавляем переноску пищи. И делаем пищу очень большой по объуму пищи. Это должно сделать выгдоня перенести несколько кусков пищи в норку и вообще не вылезать. А значит они там будут жить несколько поколений как семья.

	# Стадия 7
		Добавляем механику подавления репродуктивной функции через ферромоны. По идее это должно привести к эусоциальности. Разделению обязанностей, отказу от репродукции в пользу матки. И возможно выделятся роль фуражиров.

	# Стадия 8
		Добавляем посетепнное разрушение норки, в семье роль внутригнездового рабочего.

	# Стадия 9
		Добавим необходимость "тапать личинки", ну скажем это как бы личинки требуют ухода. И появится роль нянек.


	Омг. Даже представить страшно))) 
	Как далеко я заходил? До Стадии 3 с довольно неплохими конусами.
	Как далеко я смогу зайти? Да хрен знает )))


# What help wanted
1. overhead analysis and optimization for fast run
2. ovehead analysis and optimization for slow logging and rendering run
3. experiment runs and feedback
4. new widgets development for renderer UI

